<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <script src="./script/app.js" defer></script>
    <link rel="icon" href="./images/favicon.ico">
    <title>Calculator</title>
</head>
<body>
    <div class="main">
        <div class="calculator">
            <div class="screen">
                <div id="last-operation"></div>
                <div id="current-operation"></div>
            </div>
            <div class="buttons-area top">
                <button id="clear" value="clear">Clear</button>
                <button id="delete" value="delete">Delete</button>
            </div>
            <div class="buttons-area" id="working-area">
                <button class="num" value="7">7</button>
                <button class="num" value="8">8</button>
                <button class="num" value="9">9</button>
                <button class="operator" value="/">&#247;</button>
                <button class="num" value="4">4</button>
                <button class="num" value="5">5</button>
                <button class="num" value="6">6</button>
                <button class="operator" value="*">&#0215;</button>
                <button class="num" value="1">1</button>
                <button class="num" value="2">2</button>
                <button class="num" value="3">3</button>
                <button class="operator" value="-">-</button>
                <button class="point" value=".">.</button>
                <button class="num" value="0">0</button>
                <button class="equality" value="=">=</button>
                <button class="operator" value="+">+</button>
            </div>
        </div>
    </div>
</body>

<script>
//initiateCalculator ();

 //   function initiateCalculator () {
        const numbers = document.querySelectorAll ('.num');
        const operators = document.querySelectorAll ('.operator');
        const point = document.querySelector ('.point');
        const equality = document.querySelector ('.equality');
        let currentOperation = document.querySelector("#current-operation");
        let previousOperation = document.querySelector("#last-operation");

        let flag = false;

        currentOperation.textContent = 0;
        numbers.forEach(number => number.addEventListener('click', setNumber));
        operators.forEach(operator => operator.addEventListener('click', selectOperator));
        equality.addEventListener('click', operate)

        let obj = {
            firstValue: 0,
            secondValue: 0,
            operator: '',
            result: 0,
        };

        function setNumber (e) {
            if (flag===false) {
                    if (obj.firstValue == 0) {
                        obj.firstValue = e.target.value;
                }
                    else {
                        obj.firstValue += e.target.value;
                    }
                    currentOperation.textContent = obj.firstValue;
            }
            else {
                    if (obj.secondValue == 0) {
                        obj.secondValue = e.target.value;
                    }
                    else {
                        obj.secondValue += e.target.value;
                        currentOperation.textContent = obj.secondValue;
                    }
                    currentOperation.textContent = obj.secondValue;
                }
            }


        function selectOperator(e) {
            obj.operator = e.target.value;
            previousOperation.textContent += obj.firstValue;
            previousOperation.textContent += obj.operator;
            flag = true;
        }
    
        function operate() {
            switch (obj.operator) {
                case "+":
                    add();
                    break;
                case "-":
                    subtract();
                    break
                case "*":
                    multiply();
                    break;
                case "/":
                    divide();
                    break;
            }
            displayResult();
        }
    
        function add() {
            obj.result = parseInt (obj.firstValue) + parseInt(obj.secondValue);
        }

        function subtract() {
            obj.result = obj.firstValue - obj.secondValue;
        }

        function multiply() {
            obj.result =  obj.firstValue * obj.secondValue;
        }

        function divide() {
            obj.result =  obj.firstValue / obj.secondValue;
        }

        function displayResult () {
            previousOperation.textContent += `${obj.secondValue}`;
            previousOperation.textContent += `=`;
            currentOperation.textContent = obj['result'];
            keepCalculating ();
        }

        function keepCalculating () {
            obj ['firstValue'] = obj['result'];
        }
//}
</script>
</html>
